@use "sass:math";
@import "../base/dependencies";
@include animFadeInNoBlur;

@mixin fullScreenCenter {
	@include flexCenter;
	height: 100%;
	left: 0;
	position: fixed;
	top: 0;
	width: 100%;
}

body .drift-conductor-item {
	z-index: 1000 !important;
}

.modal-portal {
	pointer-events: none;
	z-index: 10000;
}

.Modal {
	@include fullScreenCenter;
	border: 0 none;
	object-fit: unset;
	opacity: 0;
	pointer-events: none;
	transition: opacity 0.6s ease-out 0s;
	z-index: 10000;

	&.visible {
		opacity: 1;
		pointer-events: all;
	}

	.bg {
		@include fullScreenCenter;
		background: linear-gradient(to bottom, rgba($blue, 0.7) 0%, rgba($blue, 0.9) 100%);
		border: 0 none;
		opacity: 1;
		transition: opacity 0.6s;
		width: 100%;
		overscroll-behavior: none;
	}

	.card {
		align-items: center;
		background-color: #FFF;
		border-radius: 1rem;
		display: flex;
		height: 80vh;
		justify-content: center;
		padding: calc(min(20px, 10vmax));
		position: relative;
		width: 80vw;
		z-index: 10;
	}

	.close {
		$size: 36px;
		@include flexCenter;
		appearance: none;
		background-color: rgba(lighten($blue, 70), 0.8);
		border: 0 none;
		border-radius: 50%;
		box-shadow: 2px 2px 8px #000;
		color: #FFF;
		cursor: pointer;
		font-size: $size;
		height: $size;
		line-height: 0.8;
		padding: 0 0 1px;
		position: absolute;
		right: 0;
		top: 8px;
		transition: background-color 0.3s ease-out, color 0.3s ease-out;
		vertical-align: middle;
		width: $size;
		z-index: 100;

		&:hover {
			background-color: rgba(lighten($blue, 70), 1);
		}
	}

	&.variant {
		&_xs {
			.card {
				height: auto;
				max-width: 540px;
				width: 90vw;
			}
		}

		&_sm {
			.card {
				height: 60vh;
				width: 60vw;
			}
		}

		&_med {
			.card {
				height: 80vh;
				width: 80vw;
			}
		}

		&_lg {
			.card {
				height: 90vh;
				width: 90vw;
			}
		}

		&_form {
			.card {
				flex-flow: column nowrap;
				font-size: calc(min(1rem, 0.8vw));
				height: auto;
				justify-content: flex-start;
				max-height: 90vh;
				max-width: 90rem;
				overflow-y: auto;
				padding: 7em;
			}

			.close {
				background-color: transparent;
				box-shadow: none;
				color: rgba(lighten($blue, 70), 0.8);

				&:hover {
					color: $blue;
				}
			}

			.Row {
				height: 100%;
			}

			.column {
				flex: 0 0 100%;
				flex-flow: column nowrap;
				justify-content: flex-start;
				max-width: 100%;

				&.scroll {
					overflow-y: auto;
				}
			}

			&.event {
				.bg {
					background: rgba(#000, 0.5) none;
				}

				.card {
					background-color: $alice;
					flex-flow: column nowrap;
					font-size: calc(min(1rem, 0.8vw));
					height: auto;
					justify-content: flex-start;
					max-height: 90vh;
					max-width: 540px;
					overflow-y: auto;
					padding: calc(min(5vw, 60px));
				}

				.Form {
					margin: auto;
					padding: 0;

					form {
						fieldset {
							margin-bottom: 12px;
						}

						.field .input {

							input:not([type=checkbox]),
							select,
							textarea {
								@include fontReg;
								border: none;
								color: #8E918F;
								font-size: 14px;
							}
						}

						.field.hs_consent_to_privacy_policy label>span {
							font-size: 14px;
						}

						.Form form .field .hs-error-msgs li label {
							font-size: 12px;
						}

						div.actions {
							text-align: right;

							input[type=submit].hs-button {
								background-color: $reflex;
								border: 0 none;
								border-radius: 1000px;
								color: #FFF;
								font-size: 14px;

								&:hover {
									background-color: $cerulean;
								}
							}
						}
					}

					.submitted-message {
						color: $ash;
						font-size: 16px;
						line-height: 140%;
						margin: 0 auto;
						padding: 2rem;
					}
				}
			}
		}

		&_video {
			.card {
				background-color: transparent;
				height: 80vh;
				max-height: 45vw;
				max-width: 80vw;
				width: 142vh;
			}

			iframe,
			.Video,
			video {
				@include bg;
				border-radius: 1rem;
				max-width: 100%;
			}
		}
	}

	.Form {
		min-height: unset;
		padding-bottom: calc(min(7rem, 5.6vw));

		.CTA {
			border-radius: 6px;
			margin-top: 3rem;
		}

		form {
			.field {
				label>span {
					@include fontBolder;
					color: $grey;
					font-size: 1.4rem;
				}

				&.hs_consent_to_privacy_policy label>span {
					@include fontReg;
					font-size: 1.2rem;
				}

				.input input:not([type="checkbox"]),
				.input select,
				.input textarea {
					@include fontBold;
					border: 1px solid #E8E8E8;
					border-radius: 6px;
					color: #9A9A9A;
					font-size: 1.4rem;
					height: auto;
					min-height: 4.8rem;
					padding: 1.4rem;
				}
			}

			div.actions {
				display: flex;
				justify-content: center;

				input[type="submit"].hs-button {
					border-radius: 6px;
					font-size: 1.6rem;
					text-transform: none;
					width: 40%;
				}
			}
		}

		.submitted-message {
			border: 1px solid #E6E6E6;
			border-radius: 6px;
			margin-bottom: calc(max(-7rem, -5.6vw));
			padding: 7rem 2rem;

			p {
				@include fontReg;
				font-size: 22px;
				margin-bottom: 2rem;
				text-align: center;

				&:last-of-type {
					margin-bottom: 0;
				}
			}
		}

		&.hide_submitted_message {
			.submitted-message {
				visibility: hidden;
			}
		}
	}

	&.submit_teal {
		.Form form {
			input[type=submit].hs-button {
				background-color: $teal;
				border-color: $teal;

				&:hover {
					border-color: $teal;
					color: $teal;
				}
			}
		}
	}

	&.theme_carolina {
		.Form {
			padding-bottom: 0;

			form {
				.field {
					.input {

						input:not([type=checkbox]),
						select,
						textarea {
							@include fontReg;
							font-size: 16px;
						}
					}

					label>span,
					&.hs_consent_to_privacy_policy label>span {
						@include fontReg;
						font-size: 14px;
					}
				}

				div.actions {
					justify-content: flex-end;

					input[type=submit].hs-button {
						background-color: $reflex;
						border: 1px solid $reflex;
						border-radius: 1000px;
						font-size: 16px;
						letter-spacing: 0.1em;
						text-transform: uppercase;
						width: auto;

						&:hover {
							background-color: #FFF;
							border-color: $reflex;
							color: $reflex;
						}
					}
				}
			}
		}

		.submitted-message {
			border: 0 none;
			margin: 0;
			padding: 0 0 70px;

			p {
				color: $ash;
				font-size: 16px;
				text-align: left;

				strong {
					@include fontBlack;
					background-image: url("../../img/ui/check_circle_green.svg");
					background-position: left 0.1em;
					background-repeat: no-repeat;
					background-size: 1em 1em;
					color: $reflex;
					display: flex;
					font-size: 1.8em;
					line-height: 1.2em;
					padding-left: 1.6em;
				}
			}
		}
	}
}

@media (min-width:$mobile_min_width) and (orientation:landscape),
(min-width:$tablet_min_width) {
	.Modal {
		&.variant_form {
			.Row.cols-2 .column {
				max-width: calc(50% - 2.5rem);
			}
		}
	}
}

@media (min-width:$desktop_min_width) {
	.Modal {

		&.variant {
			&_form .card {}
		}
	}
}

@media (min-width:$sm) {
	.Modal {
		.close {
			right: 10px;
			top: 10px;
		}

		&.variant {
			&_form .card {}

			&_xs {
				.card {
					width: 60vw;
				}
			}
		}
	}
}