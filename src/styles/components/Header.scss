@use "sass:math";

@import "../base/dependencies";

@include animFadeInNoBlur;

@keyframes turn {
	0% {
		transform: translate(-50%, -50%) rotate(0deg);
	}

	100% {
		transform: translate(-50%, -50%) rotate(360deg);
	}
}

@mixin linkGradientBar {
	background: linear-gradient(to right, #19CDFF 15%, #1E1BB2 45%, #FF1919 90%);
	bottom: 0;
	content: "";
	display: block;
	height: 2px;
	left: 50%;
	position: absolute;
	transform: translateX(-50%);
	transition: width 0.2s ease-out;
	width: 0%;
}

.Header {
	background-color: #FFF;
	display: grid;
	font-size: 1rem;
	height: var(--header-height);
	max-width: 1600px;
	padding: 0;
	place-items: center;
	position: fixed;
	top: 0;
	transition: height $headerReduceTransitionTime, grid-template-rows $headerReduceTransitionTime;
	width: 100%;
	z-index: 100;

	&>.container {
		height: var(--header-main-nav-height);
		transition: height $headerReduceTransitionTime;
	}

	&:not(.has_spynav):after {
		background: linear-gradient(to bottom, rgba(#000, 0.1) 0%, rgba(#000, 0) 100%);
		bottom: 0;
		content: "";
		height: 1rem;
		left: 0;
		opacity: 1;
		pointer-events: none;
		position: absolute;
		transform: translateY(100%);
		transition: opacity 0.2s;
		width: 100%;
		z-index: 1;
	}

	&.has_spynav {
		border-bottom: 1px solid #ECECEC;
	}

	.branding {
		align-items: center;
		display: flex;
		justify-content: flex-start;
		max-width: var(--header-brand-logo-max-width);
		transition: max-width $headerReduceTransitionTime, opacity 0.3s;
		width: 100%;

		&:hover {
			opacity: 0.6;
		}
	}

	.broadsign_logo {
		cursor: pointer;
		height: var(--header-brand-logo-height);
		margin: 0;
		max-width: 100%;
		object-fit: contain;
		object-position: left center;
		transition: height $headerReduceTransitionTime;
		transition-delay: 0.1s;
	}

	.p-button {
		@include fontReg;
		border: 0 none;
		border-radius: 100px;
		flex: 0 0 auto;
		font-size: 14px;
		letter-spacing: 0.1em;
	}

	.log_in_link {
		button {
			filter: saturate(0) brightness(4);
			transition: filter 0.4s;
		}

		&:hover {
			button {
				filter: brightness(2);
			}
		}

		&.active:after {
			background-color: rgba(#FFF, 0.01);
			content: "";
			height: 200%;
			left: 0;
			position: absolute;
			top: 0;
			width: 100%;
		}
	}

	.log_in_icon {
		height: 20px;
		width: 20px;
	}

	.log_in_collapse {
		max-height: 0px;
		max-width: none;
		right: 0;
		top: calc(100% + 8px);
		transition: max-height 0.3s ease, padding 0.3s ease;
		width: auto;

		span {
			display: inline-block;
			white-space: nowrap;
		}

		.tag {
			border-radius: 5px;
			letter-spacing: 0.2em;
			margin-left: 1.2em;
		}

		&.active {
			max-height: 120px;
		}
	}

	.disabled {
		opacity: 0.5;
	}
}

.nav_fade_in {
	@include fadeInOnce(0.3s);
	opacity: 0;
}

.mobile_nav {
	background-color: #FFF;
	width: 100%;

	&__wrapper {
		background-color: #FFF;
		flex: 1 1 100%;
		height: auto;
		left: 50%;
		max-height: 0vh;
		max-width: 1088px;
		opacity: 0;
		overflow: hidden;
		pointer-events: none;
		position: fixed;
		top: var(--header-mobile-nav-top-pos);
		transform: translateX(-50%);
		transition: max-height 0.6s, opacity 0.6s, top 0.6s;
		width: 100%;

		&.active {
			max-height: calc(min(70vh, 400px));
			opacity: 1;
			overflow-y: scroll;
			pointer-events: all;
		}
	}

	&__accordion {
		&.active {
			&>.mobile_nav__accordion_header {
				&:after {
					transform: translateY(-50%) rotate(-180deg);
				}
			}

			&>.mobile_nav__collapse {
				max-height: 100vh;
				transition: max-height 0.6s;
			}
		}
	}

	&__accordion_header {
		color: $ash;
		cursor: pointer;
		display: block;
		font-size: 14px;
		position: relative;
		text-align: left;
		width: 100%;

		&:after {
			content: "\e902";
			display: inline-block;
			font-family: "primeicons", "TO BE DELETED";
			position: absolute;
			right: 16px;
			top: 50%;
			transform: translateY(-50%);
			transition: transform 0.3s ease;
		}

		&:hover {
			color: $reflex;
		}
	}

	&__collapse {
		max-height: 0vh;
		overflow: hidden;
		transition: max-height 0.2s;
	}

	&__item {
		color: $ash;
		display: block;
		font-size: 14px;
		line-height: 120%;
		padding-left: 1em;
		transition: color 0.3s;
		width: 80%;

		&:hover {
			color: $reflex;
		}
	}

	&__burger {
		appearance: none;
		background: #FFF none;
		border: 0 none;
		cursor: pointer;
		display: block;
		height: 50px;
		max-width: 10vw;
		position: relative;
		transition: transform .6s;
		width: 18px;

		.line {
			background-color: $ash;
			border-radius: 4px;
			height: 2px;
			left: 10%;
			position: absolute;
			top: 50%;
			-webkit-transform: translateY(-50%);
			transform: translateY(-50%);
			transition: background-color 0.6s, opacity .6s, width .6s, transform .6s;
			width: 18px;

			&:nth-child(1) {
				transform: translateY(-300%);
			}

			&:nth-child(2) {
				transition: transform .6s, opacity .6s, width .6s, -webkit-transform .6s;
			}

			&:nth-child(3) {
				transform: translateY(200%);
			}
		}

		&:hover {
			.line {
				background-color: $cerulean;
			}
		}

		&.active {
			.line {
				&:nth-child(1) {
					transform: translateY(-50%) rotate(225deg);
				}

				&:nth-child(2) {
					opacity: 0;
				}

				&:nth-child(3) {
					transform: translateY(-50%) rotate(-225deg);
				}
			}
		}
	}
}

.main_nav {
	$navItemActiveColor: $alice;
	align-items: stretch;
	display: flex;
	flex: 1 1 100%;
	flex-flow: row nowrap;
	height: var(--header-main-nav-height);
	justify-content: space-between;
	position: relative;
	transition: height $headerReduceTransitionTime;

	.spacer {
		flex: 1 1 100%;
	}

	.drawer_link {
		@include flexCenter;
		color: $ash;
		cursor: pointer;
		font-size: 16px;
		line-height: 120%;
		padding: 1em;
		text-align: center;
		white-space: nowrap;

		&:after {
			@include linkGradientBar;
		}

		.label_normal {
			opacity: 1;
			transition: opacity 0.3s;
		}

		.label_hover {
			left: 50%;
			opacity: 0;
			top: 50%;
			transform: translate(-50%, -50%);
			transition: opacity 0.3s;
		}

		&:hover {
			&:after {
				width: calc(100% - 2em);
			}

			&:before {
				@include bg;
				background-color: rgba(#FFF, 0.01);
				content: "";
				display: block;
				height: 200%;
			}

			.label_normal {
				opacity: 0;
			}

			.label_hover {
				opacity: 1;
			}
		}
	}

	button.contact_us {}

	&__master_drawer {
		background-color: #FFF;
		left: 50%;
		max-height: 0vh;
		max-width: 1088px;
		overflow: hidden;
		pointer-events: none;
		position: fixed;
		top: var(--header-master-drawer-top-pos);
		transform: translateX(-50%);
		transition: max-height 0.6s ease 0s;
		width: calc(100vw - 32px);

		&.open {
			max-height: 100vh;
		}
	}

	&__drawer {
		@include bg;
		align-items: stretch;
		background-color: #FFF;
		display: flex;
		flex-flow: row nowrap;
		height: auto;
		justify-content: space-between;
		max-width: none;
		opacity: 0;
		pointer-events: none;
		transition: opacity 0s linear 0.6s;
		width: calc(100% + 16px);
		z-index: 1;

		&.active {
			@include fadeInOnce(0.4s);
			pointer-events: all;
			position: relative;
			transition: opacity 0.6s ease 0s;
			z-index: 10;
		}

		.heading {
			@include fontBold;
			align-items: center;
			color: $ash;
			display: flex;
			font-size: 12px;
			height: 38px;
			letter-spacing: 0.1em;
			text-transform: uppercase;
		}

		.col-0 {
			max-width: 0px;
			opacity: 0;
			overflow: hidden;
			transition: max-width 0.3s ease, opacity 0.3s ease;
		}
	}


	&__column_header {
		color: $ash;
		font-size: 12px;
		letter-spacing: 0.1em;
		line-height: 26px;
		opacity: 0.5;
		text-transform: uppercase;
	}

	&__link {
		border-radius: 4px;
		color: $ash;
		display: block;
		font-size: 15px;
		line-height: 26px;
		position: relative;
		transition: background-color 0.3s ease;
		width: calc(100% + 2em);

		&.has_sub {
			&:after {
				background: url("../../img/controls/chevron_down_ash.svg") center center no-repeat;
				background-size: contain;
				content: "";
				height: 1em;
				opacity: 0.4;
				position: absolute;
				right: 1em;
				top: calc(16px + 0.5em);
				transform: rotate(-90deg) translateY(-50%);
				transition: opacity 0.3s;
				width: 1em;
			}
		}

		.icon {
			filter: saturate(0) brightness(0.6) contrast(5);
			height: 18px;
			left: 0;
			object-fit: contain;
			opacity: 0.4;
			position: absolute;
			top: 17px;
			transition: filter 0.3s ease, opacity 0.3s ease;
			width: 18px;
		}

		span {
			display: block;
		}

		.product {
			font-size: 0.9em;
		}

		&:hover,
		&.active {
			background-color: $navItemActiveColor;
			color: $ash !important;

			.icon {
				filter: saturate(1);
				opacity: 1;
			}

			&:after {
				opacity: 1;
			}
		}
	}

	&__sub {
		max-height: 0%;
		opacity: 0;
		overflow: hidden;
		transition: max-height 0.3s, opacity 0.6s;

		&.active {
			max-height: 100%;
			opacity: 1;
			transition: max-height 1s ease-in, opacity 0s;
		}
	}

	&__featured {
		background-color: $navItemActiveColor;

		&_thumbnail {
			height: 20vw;
			max-height: 190px;
			object-fit: cover;
		}

		&_title {
			font-size: 14px;
			font-weight: 900;
		}

		&_readmore {
			font-size: 13px;
			font-weight: 600;
		}

		&:hover {
			.main_nav__featured_readmore:after {
				animation: thisWayRight 1.4s linear 0s infinite;
			}
		}

		.main_nav__link {

			&:hover,
			&.active {
				background-color: #FFF;
			}
		}
	}

	&__loader {
		animation: turn 1s linear 0s infinite;
		border-radius: 50%;
		height: 40px;
		left: 50%;
		position: absolute;
		top: 50%;
	}
}

div.main_nav__link {
	cursor: default;
}

.LangSelector {
	color: $ash;
	cursor: default;
	font-size: 16px;
	height: var(--header-main-nav-height);
	transition: height $headerReduceTransitionTime;

	&__current_lang {
		color: $ash;
		font-size: 1em;
		margin: 0 2em;

		.state_normal {
			opacity: 1;
			transition: opacity 0.3s;
		}

		.state_hover {
			left: 50%;
			opacity: 0;
			position: absolute;
			top: 50%;
			transform: translate(-50%, -50%);
			transition: opacity 0.3s;
		}

		&:after {
			@include linkGradientBar;
		}
	}

	&__menu.p-menu.p-menu-overlay {
		font-size: 16px;
		letter-spacing: 0.05em;
		padding: 1em 2em;
		transform: translateX(-1em);
		width: auto;

		.p-menuitem-link {
			background-color: #FFF !important;
			justify-content: center;
			white-space: nowrap;

			.p-menuitem-text {
				display: block;
				font-family: "Roboto";
				font-size: 16px;
				justify-content: center;
				letter-spacing: 0.05em;
				overflow: visible;
				padding: 0.4em 0;
				text-align: center;
				transition: font-weight 0.3s, color 0.3s;
				white-space: nowrap;
			}

			&:hover {
				.p-menuitem-text {
					color: $reflex;
					font-weight: 700;
				}
			}
		}
	}

	&__link {}

	&.active {
		.LangSelector__current_lang {
			.state_normal {
				opacity: 0;
			}

			.state_hover {
				opacity: 1;
			}

			&:after {
				width: calc(100% - 4em);
			}
		}
	}

	&.disabled {
		opacity: 0.5;

		.LangSelector__current_lang {
			color: #BBD;
		}
	}
}

.Header .Modal.contact_us_form {
	@include fadeInOnce(0.6s);
	background-color: rgba(0, 20, 100, 0.6);
	z-index: 10000;

	.close_btn {
		align-items: center;
		appearance: none;
		background-color: transparent;
		border: 0 none;
		cursor: pointer;
		display: flex;
		font-size: 5rem;
		justify-content: center;
		position: absolute;
		right: 1rem;
		text-shadow: 1px 1px 1px rgba(#000, 0);
		top: 0.6rem;
		transition: color 0.3s, text-shadow 0.3s;

		&:hover {
			color: #353535 !important;
			text-shadow: 1px 1px 4px rgba(#000, 0.3);
		}
	}

	.inner {
		align-items: flex-start;
		background-color: white;
		border-radius: 2rem;
		display: flex;
		height: auto;
		margin: 0 auto;
		max-height: 90vh;
		max-width: 90rem;
		overflow: auto;
		padding: 8rem;
		width: 90vw;
	}

	.Form {
		margin: auto;
		max-width: 600px;
		min-height: 0;
		padding: 6rem 0;

		input,
		select,
		textarea {
			border: 1px solid #DDD;
			padding-left: 0.6em;
			padding-right: 0.6em;
		}

		.actions {
			text-align: center;
		}

		.hs-button {
			background-color: $teal;
			border-color: $teal;
			border-radius: 0.8rem;

			&:hover,
			&:active {
				background-color: #FFF;
				color: $teal;
			}
		}
	}
}

.is_contact nav.main_nav .nav_item.button {

	.contact_us_lp,
	.contact_us_popup {
		pointer-events: none;
		user-select: none;
	}
}